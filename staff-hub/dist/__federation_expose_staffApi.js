"use strict";(self.webpackChunk_common_staff_hub=self.webpackChunk_common_staff_hub||[]).push([["573"],{5825:function(t,e,n){n.r(e),n.d(e,{default:()=>h,deleteStaffDocument:()=>f,generateStaffDocumentPresignedURL:()=>l,getStaffDocuments:()=>s,staffApi:()=>d,uploadStaffDocuments:()=>i});var o=n(4295);function a(t,e,n,o,a,r,c){try{var u=t[r](c),i=u.value}catch(t){n(t);return}u.done?e(i):Promise.resolve(i).then(o,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(o,r){var c=t.apply(e,n);function u(t){a(c,o,r,u,i,"next",t)}function i(t){a(c,o,r,u,i,"throw",t)}u(void 0)})}}function c(t,e){var n,o,a,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(u){return function(i){var s=[u,i];if(n)throw TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(r=0)),r;)try{if(n=1,o&&(a=2&s[0]?o.return:s[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,s[1])).done)return a;switch(o=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return r.label++,{value:s[1],done:!1};case 5:r.label++,o=s[1],s=[0];continue;case 7:s=r.ops.pop(),r.trys.pop();continue;default:if(!(a=(a=r.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){r=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){r.label=s[1];break}if(6===s[0]&&r.label<a[1]){r.label=a[1],a=s;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(s);break}a[2]&&r.ops.pop(),r.trys.pop();continue}s=e.call(t,r)}catch(t){s=[6,t],o=0}finally{n=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}var u=function(){var t=localStorage.getItem("tenantId");return t&&"default-tenant"!==t?t:"00000000-0000-0000-0000-000000000001"},i=function(t,e){return r(function(){return c(this,function(n){return[2,Promise.all(e.map(function(e){return r(function(){var n,o;return c(this,function(a){switch(a.label){case 0:return(n=new FormData).append("file",e),n.append("staff_id",t),n.append("isPublic","false"),n.append("tags","document_type:staff_document,uploaded_at:".concat(new Date().toISOString())),[4,fetch("/api/v1/staff/documents/upload",{method:"POST",body:n,headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"X-Tenant-ID":u()}})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to upload ".concat(e.name,": ").concat(o.statusText));return[2,o.json()]}})})()}))]})})()},s=function(t){return r(function(){var e;return c(this,function(n){switch(n.label){case 0:return[4,fetch("/api/v1/staff/".concat(t,"/documents"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"X-Tenant-ID":localStorage.getItem("tenantId")||"","Content-Type":"application/json"}})];case 1:if(!(e=n.sent()).ok)throw Error("Failed to get staff documents: ".concat(e.statusText));return[2,e.json()]}})})()},f=function(t,e,n){return r(function(){var o;return c(this,function(a){switch(a.label){case 0:return[4,fetch("/api/v1/staff/".concat(t,"/documents/").concat(e,"/").concat(n),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"X-Tenant-ID":localStorage.getItem("tenantId")||""}})];case 1:if(!(o=a.sent()).ok)throw Error("Failed to delete document: ".concat(o.statusText));return[2,o.json()]}})})()},l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3600;return r(function(){var a;return c(this,function(r){switch(r.label){case 0:return[4,fetch("/api/v1/staff/".concat(t,"/documents/presigned-url"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"X-Tenant-ID":localStorage.getItem("tenantId")||"","Content-Type":"application/json"},body:JSON.stringify({path:e,bucket:"staff-documents",method:n,expiresIn:o})})];case 1:if(!(a=r.sent()).ok)throw Error("Failed to generate presigned URL: ".concat(a.statusText));return[2,a.json()]}})})()},d=o.defaultStaffApiClient;let h=d}}]);