"use strict";(self.webpackChunk_common_staff_hub=self.webpackChunk_common_staff_hub||[]).push([["649"],{433:function(e,t,r){r.r(t),r.d(t,{useStaff:()=>i});var n=r(587),a=r(4295);function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function o(e,t,r,n,a,u,o){try{var l=e[u](o),c=l.value}catch(e){r(e);return}l.done?t(c):Promise.resolve(c).then(n,a)}function l(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var u=e.apply(t,r);function l(e){o(u,n,a,l,c,"next",e)}function c(e){o(u,n,a,l,c,"throw",e)}l(void 0)})}}function c(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var u=[],o=!0,l=!1;try{for(a=a.call(e);!(o=(r=a.next()).done)&&(u.push(r.value),!t||u.length!==t);o=!0);}catch(e){l=!0,n=e}finally{try{o||null==a.return||a.return()}finally{if(l)throw n}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){var r,n,a,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){var s=[l,c];if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,n=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){u=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){u.label=s[1];break}if(6===s[0]&&u.label<a[1]){u.label=a[1],a=s;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(s);break}a[2]&&u.ops.pop(),u.trys.pop();continue}s=t.call(e,u)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}function i(){var e=s((0,n.useState)([]),2),t=e[0],r=e[1],u=s((0,n.useState)(null),2),o=u[0],i=u[1],b=s((0,n.useState)(!1),2),d=b[0],p=b[1],y=s((0,n.useState)(null),2),h=y[0],m=y[1],S=s((0,n.useState)(""),2),v=S[0],w=S[1],g=s((0,n.useState)({}),2),O=g[0],j=g[1],k=s((0,n.useState)(null),2),E=k[0],C=k[1],F=s((0,n.useState)(),2),P=F[0],A=F[1],I=(0,n.useCallback)(function(){m(null)},[]),_=(0,n.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l(function(){var t,n;return f(this,function(u){switch(u.label){case 0:p(!0),m(null),A(e),u.label=1;case 1:return u.trys.push([1,3,4,5]),[4,a.defaultStaffApiClient.getStaffList(e)];case 2:if((t=u.sent()).success)r(t.data),C(t.pagination);else throw Error("Failed to load staff");return[3,5];case 3:return m(c(n=u.sent(),Error)?n.message:"Failed to load staff"),console.error("Failed to load staff:",n),[3,5];case 4:return p(!1),[7];case 5:return[2]}})})()},[]),x=(0,n.useCallback)(function(e){return l(function(){var t,r;return f(this,function(n){switch(n.label){case 0:p(!0),m(null),n.label=1;case 1:return n.trys.push([1,6,7,8]),[4,a.defaultStaffApiClient.createStaff(e)];case 2:if(!((t=n.sent()).success&&t.data))return[3,4];return[4,_(P)];case 3:return n.sent(),[2,t.data];case 4:throw Error("Failed to create staff member");case 5:return[3,8];case 6:return m(c(r=n.sent(),Error)?r.message:"Failed to create staff member"),console.error("Failed to create staff:",r),[2,null];case 7:return p(!1),[7];case 8:return[2]}})})()},[_,P]),D=(0,n.useCallback)(function(e,t){return l(function(){var n,u;return f(this,function(l){switch(l.label){case 0:p(!0),m(null),l.label=1;case 1:return l.trys.push([1,3,4,5]),[4,a.defaultStaffApiClient.updateStaff(e,t)];case 2:if((n=l.sent()).success&&n.data)return r(function(t){return t.map(function(t){return t.id===e?n.data:t})}),(null==o?void 0:o.id)===e&&i(n.data),[2,n.data];throw Error("Failed to update staff member");case 3:return m(c(u=l.sent(),Error)?u.message:"Failed to update staff member"),console.error("Failed to update staff:",u),[2,null];case 4:return p(!1),[7];case 5:return[2]}})})()},[o]),T=(0,n.useCallback)(function(e){return l(function(){var t;return f(this,function(n){switch(n.label){case 0:p(!0),m(null),n.label=1;case 1:return n.trys.push([1,3,4,5]),[4,a.defaultStaffApiClient.deleteStaff(e)];case 2:if(n.sent().success)return r(function(t){return t.filter(function(t){return t.id!==e})}),(null==o?void 0:o.id)===e&&i(null),[2,!0];throw Error("Failed to delete staff member");case 3:return m(c(t=n.sent(),Error)?t.message:"Failed to delete staff member"),console.error("Failed to delete staff:",t),[2,!1];case 4:return p(!1),[7];case 5:return[2]}})})()},[o]),Q=(0,n.useCallback)(function(e){i(e)},[]),G=(0,n.useCallback)(function(){return l(function(){return f(this,function(e){switch(e.label){case 0:var t,r;return[4,_((t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},P),r=r={search:v,filters:O},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}),t))];case 1:return e.sent(),[2]}})})()},[_,P,v,O]);return(0,n.useEffect)(function(){var e=setTimeout(function(){_({search:v,filters:O})},300);return function(){return clearTimeout(e)}},[v,O,_]),(0,n.useEffect)(function(){_()},[]),{staff:t,selectedStaff:o,loading:d,error:h,searchQuery:v,filters:O,pagination:E,loadStaff:_,createStaff:x,updateStaff:D,deleteStaff:T,selectStaff:Q,setSearchQuery:w,setFilters:j,clearError:I,refreshStaff:G}}}}]);