"use strict";(self.webpackChunk_common_coupons_hub=self.webpackChunk_common_coupons_hub||[]).push([["483"],{5607:function(e,r,s){s.r(r),s.d(r,{default:()=>d});var t=s(4076),l=s(587),n=s(520),o=s(6315);function i(e,r){(null==r||r>e.length)&&(r=e.length);for(var s=0,t=Array(r);s<r;s++)t[s]=e[s];return t}function c(e){for(var r=1;r<arguments.length;r++){var s=null!=arguments[r]?arguments[r]:{},t=Object.keys(s);"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(s).filter(function(e){return Object.getOwnPropertyDescriptor(s,e).enumerable}))),t.forEach(function(r){var t;t=s[r],r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t})}return e}function a(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);s.push.apply(s,t)}return s})(Object(r)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(r,s))}),e}function d(e){var r=e.coupon,s=e.onSubmit,d=e.onCancel,u=(0,n.cI)({defaultValues:r||{code:"",scope:o.aA.GLOBAL,status:o.K7.ACTIVE,discountType:o.Lb.PERCENTAGE,discountValue:0,firstTimeUserOnly:!1,stackableWithOther:!1,stackablePriority:0,priority:o.X3.NORMAL,combination:o.IB.NONE,isActive:!0,validFrom:new Date}}),m=u.register,b=(u.control,u.handleSubmit),x=u.watch,p=u.setValue,f=u.formState.errors,g=x("discountType");return x("scope"),(0,l.useEffect)(function(){r&&Object.entries(r).forEach(function(e){var r=function(e){if(Array.isArray(e))return e}(e)||function(e,r){var s,t,l=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=l){var n=[],o=!0,i=!1;try{for(l=l.call(e);!(o=(s=l.next()).done)&&(n.push(s.value),n.length!==r);o=!0);}catch(e){i=!0,t=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw t}}return n}}(e,2)||function(e,r){if(e){if("string"==typeof e)return i(e,2);var s=Object.prototype.toString.call(e).slice(8,-1);if("Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s)return Array.from(s);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(e,r)}}(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=r[0],t=r[1];null!=t&&p(s,t)})},[r,p]),(0,t.jsxs)("form",{onSubmit:b(s),className:"space-y-6",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Coupon Code"}),(0,t.jsx)("input",a(c({},m("code",{required:"Coupon code is required",pattern:{value:/^[A-Z0-9_-]+$/,message:"Code must contain only uppercase letters, numbers, hyphens, and underscores"}})),{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"SUMMER2024"})),f.code&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.code.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),(0,t.jsxs)("select",a(c({},m("status")),{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:o.K7.ACTIVE,children:"Active"}),(0,t.jsx)("option",{value:o.K7.INACTIVE,children:"Inactive"}),(0,t.jsx)("option",{value:o.K7.SCHEDULED,children:"Scheduled"}),(0,t.jsx)("option",{value:o.K7.EXPIRED,children:"Expired"})]}))]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",a(c({},m("description")),{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Describe what this coupon offers..."}))]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Scope"}),(0,t.jsxs)("select",a(c({},m("scope")),{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:o.aA.GLOBAL,children:"Global"}),(0,t.jsx)("option",{value:o.aA.VENDOR,children:"Vendor"}),(0,t.jsx)("option",{value:o.aA.CATEGORY,children:"Category"}),(0,t.jsx)("option",{value:o.aA.PRODUCT,children:"Product"}),(0,t.jsx)("option",{value:o.aA.USER,children:"User"})]}))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Type"}),(0,t.jsxs)("select",a(c({},m("discountType")),{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:o.Lb.PERCENTAGE,children:"Percentage"}),(0,t.jsx)("option",{value:o.Lb.FIXED,children:"Fixed Amount"}),(0,t.jsx)("option",{value:o.Lb.BUY_X_GET_Y,children:"Buy X Get Y"}),(0,t.jsx)("option",{value:o.Lb.FREE_SHIPPING,children:"Free Shipping"})]}))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Value"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",a(c({},m("discountValue",{required:"Discount value is required",min:{value:0,message:"Value must be positive"},max:g===o.Lb.PERCENTAGE?{value:100,message:"Percentage cannot exceed 100"}:void 0})),{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),(0,t.jsx)("span",{className:"absolute right-3 top-2.5 text-gray-500",children:g===o.Lb.PERCENTAGE?"%":"$"})]}),f.discountValue&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.discountValue.message})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid From"}),(0,t.jsx)("input",a(c({},m("validFrom",{required:"Start date is required"})),{type:"datetime-local",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})),f.validFrom&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.validFrom.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valid Until (Optional)"}),(0,t.jsx)("input",a(c({},m("validUntil")),{type:"datetime-local",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min Order Value"}),(0,t.jsx)("input",a(c({},m("minOrderValue",{min:0})),{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00"}))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Discount Amount"}),(0,t.jsx)("input",a(c({},m("maxDiscount",{min:0})),{type:"number",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"No limit"}))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Total Usage"}),(0,t.jsx)("input",a(c({},m("maxUsageCount",{min:0})),{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Unlimited"}))]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Usage Per User"}),(0,t.jsx)("input",a(c({},m("maxUsagePerUser",{min:0})),{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Unlimited"}))]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Priority"}),(0,t.jsxs)("select",a(c({},m("priority")),{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,t.jsx)("option",{value:o.X3.LOW,children:"Low"}),(0,t.jsx)("option",{value:o.X3.NORMAL,children:"Normal"}),(0,t.jsx)("option",{value:o.X3.HIGH,children:"High"}),(0,t.jsx)("option",{value:o.X3.CRITICAL,children:"Critical"})]}))]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",a(c({},m("firstTimeUserOnly")),{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})),(0,t.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"First-time users only"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",a(c({},m("stackableWithOther")),{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})),(0,t.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Can be combined with other coupons"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",a(c({},m("isActive")),{type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"})),(0,t.jsx)("label",{className:"ml-2 block text-sm text-gray-700",children:"Active"})]})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t",children:[(0,t.jsx)("button",{type:"button",onClick:d,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:r?"Update Coupon":"Create Coupon"})]})]})}}}]);