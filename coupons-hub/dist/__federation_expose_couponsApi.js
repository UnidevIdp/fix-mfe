"use strict";(self.webpackChunk_common_coupons_hub=self.webpackChunk_common_coupons_hub||[]).push([["937"],{9374:function(t,e,r){r.r(e),r.d(e,{couponsApi:()=>l});var n=r(4295);function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e,r,n,o,a,c){try{var u=t[a](c),i=u.value}catch(t){r(t);return}u.done?e(i):Promise.resolve(i).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var c=t.apply(e,r);function u(t){a(c,n,o,u,i,"next",t)}function i(t){a(c,n,o,u,i,"throw",t)}u(void 0)})}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,n,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],c=!0,u=!1;try{for(o=o.call(t);!(c=(r=o.next()).done)&&(a.push(r.value),!e||a.length!==e);c=!0);}catch(t){u=!0,n=t}finally{try{c||null==o.return||o.return()}finally{if(u)throw n}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);if("Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}}(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){var r,n,o,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},c=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return c.next=u(0),c.throw=u(1),c.return=u(2),"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function u(u){return function(i){var s=[u,i];if(r)throw TypeError("Generator is already executing.");for(;c&&(c=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}var s=(0,n.createServiceClient)("coupons"),l=new(function(){var t;function e(){if(!(this instanceof e))throw TypeError("Cannot call a class as a function")}return t=[{key:"getCoupons",value:function(t){return c(function(){var e,r,n,o;return i(this,function(a){switch(a.label){case 0:return e=new URLSearchParams,Object.entries(t).forEach(function(t){var r=u(t,2),n=r[0],o=r[1];null!=o&&e.append(n,o.toString())}),r=e.toString()?"/coupons?".concat(e):"/coupons",[4,s.get(r)];case 1:if(!(n=a.sent()).success)throw Error((null==(o=n.error)?void 0:o.message)||"Failed to fetch coupons");return[2,n.data]}})})()}},{key:"getCouponById",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return[4,s.get("/coupons/".concat(t))];case 1:if(!(e=n.sent()).success)throw Error((null==(r=e.error)?void 0:r.message)||"Failed to fetch coupon");return[2,e.data]}})})()}},{key:"createCoupon",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return[4,s.post("/coupons",t)];case 1:if(!(e=n.sent()).success)throw Error((null==(r=e.error)?void 0:r.message)||"Failed to create coupon");return[2,e.data]}})})()}},{key:"updateCoupon",value:function(t,e){return c(function(){var r,n;return i(this,function(o){switch(o.label){case 0:return[4,s.put("/coupons/".concat(t),e)];case 1:if(!(r=o.sent()).success)throw Error((null==(n=r.error)?void 0:n.message)||"Failed to update coupon");return[2,r.data]}})})()}},{key:"deleteCoupon",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return[4,s.delete("/coupons/".concat(t))];case 1:if(!(e=n.sent()).success)throw Error((null==(r=e.error)?void 0:r.message)||"Failed to delete coupon");return[2]}})})()}},{key:"validateCoupon",value:function(t,e){return c(function(){var r,n;return i(this,function(o){switch(o.label){case 0:return[4,s.post("/coupons/validate",{code:t,orderDetails:e})];case 1:if(!(r=o.sent()).success)throw Error((null==(n=r.error)?void 0:n.message)||"Failed to validate coupon");return[2,r.data]}})})()}},{key:"getCouponStatistics",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return[4,s.get("/coupons/".concat(t,"/statistics"))];case 1:if(!(e=n.sent()).success)throw Error((null==(r=e.error)?void 0:r.message)||"Failed to fetch coupon statistics");return[2,e.data]}})})()}},{key:"getCampaigns",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return e=new URLSearchParams,t&&Object.entries(t).forEach(function(t){var r=u(t,2),n=r[0],o=r[1];null!=o&&e.append(n,o.toString())}),[4,fetch("".concat(API_BASE_URL,"/campaigns?").concat(e),{headers:this.headers})];case 1:if(!(r=n.sent()).ok)throw Error("Failed to fetch campaigns");return[2,r.json()]}})}).call(this)}},{key:"createCampaign",value:function(t){return c(function(){var e;return i(this,function(r){switch(r.label){case 0:return[4,fetch("".concat(API_BASE_URL,"/campaigns"),{method:"POST",headers:this.headers,body:JSON.stringify(t)})];case 1:if(!(e=r.sent()).ok)throw Error("Failed to create campaign");return[2,e.json()]}})}).call(this)}},{key:"updateCampaign",value:function(t,e){return c(function(){var r;return i(this,function(n){switch(n.label){case 0:return[4,fetch("".concat(API_BASE_URL,"/campaigns/").concat(t),{method:"PUT",headers:this.headers,body:JSON.stringify(e)})];case 1:if(!(r=n.sent()).ok)throw Error("Failed to update campaign");return[2,r.json()]}})}).call(this)}},{key:"deleteCampaign",value:function(t){return c(function(){return i(this,function(e){switch(e.label){case 0:return[4,fetch("".concat(API_BASE_URL,"/campaigns/").concat(t),{method:"DELETE",headers:this.headers})];case 1:if(!e.sent().ok)throw Error("Failed to delete campaign");return[2]}})}).call(this)}},{key:"exportCoupons",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return e=new URLSearchParams,Object.entries(t).forEach(function(t){var r=u(t,2),n=r[0],o=r[1];null!=o&&e.append(n,o.toString())}),[4,fetch("".concat(API_BASE_URL,"/coupons/export?").concat(e),{headers:this.headers})];case 1:if(!(r=n.sent()).ok)throw Error("Failed to export coupons");return[2,r.blob()]}})}).call(this)}},{key:"importCoupons",value:function(t){return c(function(){var e,r;return i(this,function(n){switch(n.label){case 0:return(e=new FormData).append("file",t),[4,fetch("".concat(API_BASE_URL,"/coupons/import"),{method:"POST",headers:{Authorization:this.headers.Authorization},body:e})];case 1:if(!(r=n.sent()).ok)throw Error("Failed to import coupons");return[2,r.json()]}})}).call(this)}}],function(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}(e.prototype,t),e}())}}]);