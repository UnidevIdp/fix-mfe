"use strict";(self.webpackChunk_ecommerce_categories_hub=self.webpackChunk_ecommerce_categories_hub||[]).push([["186"],{688:function(e,t,r){r.r(t),r.d(t,{default:()=>p,useCategories:()=>f});var n=r(587),a=r(7498);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){r(e);return}c.done?t(u):Promise.resolve(u).then(n,a)}function c(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var o=e.apply(t,r);function c(e){i(o,n,a,c,u,"next",e)}function u(e){i(o,n,a,c,u,"throw",e)}c(void 0)})}}function u(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var o=[],i=!0,c=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,n=e}finally{try{i||null==a.return||a.return()}finally{if(c)throw n}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){var s=[c,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}var f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.page,r=void 0===t?1:t,o=e.limit,i=void 0===o?20:o,f=e.search,p=e.parentId,d=e.autoFetch,g=void 0===d||d,y=s((0,n.useState)([]),2),h=y[0],b=y[1],v=s((0,n.useState)(!1),2),m=v[0],w=v[1],A=s((0,n.useState)(null),2),O=A[0],C=A[1],S=s((0,n.useState)(0),2),k=S[0],j=S[1],I=(0,n.useCallback)(function(){return c(function(){var e,t,n;return l(this,function(o){switch(o.label){case 0:w(!0),C(null),o.label=1;case 1:return o.trys.push([1,7,8,9]),e=[{id:"1",name:"Electronics",description:"Electronic devices and accessories",level:0,isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"2",name:"Smartphones",description:"Mobile phones and accessories",parentId:"1",level:1,isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"3",name:"Laptops",description:"Portable computers and accessories",parentId:"1",level:1,isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"4",name:"Gaming Laptops",description:"High-performance gaming laptops",parentId:"3",level:2,isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"5",name:"Fashion",description:"Clothing and accessories",level:0,isActive:!0,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"},{id:"6",name:"Men's Clothing",description:"Clothing for men",parentId:"5",level:1,isActive:!1,createdAt:"2024-01-01T00:00:00Z",updatedAt:"2024-01-01T00:00:00Z"}],[4,new Promise(function(e){return setTimeout(e,500)})];case 2:o.sent(),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,a.categoriesApi.getCategories({page:r,limit:i,search:f,parentId:p})];case 4:if((t=o.sent()).success&&t.data)b(t.data.categories),j(t.data.total);else throw Error("Backend not available, using mock data");return[3,6];case 5:return console.log("Using mock data:",o.sent()),b(e),j(e.length),[3,6];case 6:return[3,9];case 7:return C(u(n=o.sent(),Error)?n.message:"An unexpected error occurred"),[3,9];case 8:return w(!1),[7];case 9:return[2]}})})()},[r,i,f,p]),P=(0,n.useCallback)(function(e){return c(function(){var t,r,n;return l(this,function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,a.categoriesApi.createCategory(e)];case 1:if(!(t=o.sent()).success)return[3,3];return[4,I()];case 2:return o.sent(),[2,!0];case 3:return C((null==(r=t.error)?void 0:r.message)||"Failed to create category"),[2,!1];case 4:return[3,6];case 5:return C(u(n=o.sent(),Error)?n.message:"Failed to create category"),[2,!1];case 6:return[2]}})})()},[I]),T=(0,n.useCallback)(function(e,t){return c(function(){var r,n,o;return l(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,a.categoriesApi.updateCategory(e,t)];case 1:if((r=i.sent()).success)return b(function(r){return r.map(function(r){var n,a;return r.id===e?(n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r,t),a=a={updatedAt:new Date().toISOString()},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(a)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(a,e))}),n):r})}),[2,!0];return C((null==(n=r.error)?void 0:n.message)||"Failed to update category"),[2,!1];case 2:return C(u(o=i.sent(),Error)?o.message:"Failed to update category"),[2,!1];case 3:return[2]}})})()},[]),E=(0,n.useCallback)(function(e){return c(function(){var t,r,n;return l(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,a.categoriesApi.deleteCategory(e)];case 1:if((t=o.sent()).success)return b(function(t){return t.filter(function(t){return t.id!==e})}),j(function(e){return e-1}),[2,!0];return C((null==(r=t.error)?void 0:r.message)||"Failed to delete category"),[2,!1];case 2:return C(u(n=o.sent(),Error)?n.message:"Failed to delete category"),[2,!1];case 3:return[2]}})})()},[]);return(0,n.useEffect)(function(){g&&I()},[g,I]),{categories:h,loading:m,error:O,total:k,refetch:I,createCategory:P,updateCategory:T,deleteCategory:E}};let p=f},7498:function(e,t,r){function n(e,t,r,n,a,o,i){try{var c=e[o](i),u=c.value}catch(e){r(e);return}c.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function c(e){n(i,a,o,c,u,"next",e)}function u(e){n(i,a,o,c,u,"throw",e)}c(void 0)})}}function o(e,t){var r,n,a,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=c(0),i.throw=c(1),i.return=c(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(c){return function(u){var s=[c,u];if(r)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(o=0)),o;)try{if(r=1,n&&(a=2&s[0]?n.return:s[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,s[1])).done)return a;switch(n=0,a&&(s=[2&s[0],a.value]),s[0]){case 0:case 1:a=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,n=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!a||s[1]>a[0]&&s[1]<a[3])){o.label=s[1];break}if(6===s[0]&&o.label<a[1]){o.label=a[1],a=s;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(s);break}a[2]&&o.ops.pop(),o.trys.pop();continue}s=t.call(e,o)}catch(e){s=[6,e],n=0}finally{r=a=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}}r.r(t),r.d(t,{categoriesApi:()=>c,default:()=>u});var i=(0,r(4295).createServiceClient)("categories"),c={getCategories:function(e){return a(function(){var t,r,n;return o(this,function(a){return t=new URLSearchParams,(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.parentId)&&t.append("parentId",e.parentId),n=(r=t.toString())?"/categories?".concat(r):"/categories",[2,i.get(n)]})})()},getCategoryById:function(e){return a(function(){return o(this,function(t){return[2,i.get("/categories/".concat(e))]})})()},createCategory:function(e){return a(function(){return o(this,function(t){return[2,i.post("/categories",e)]})})()},updateCategory:function(e,t){return a(function(){return o(this,function(r){return[2,i.put("/categories/".concat(e),t)]})})()},deleteCategory:function(e){return a(function(){return o(this,function(t){return[2,i.delete("/categories/".concat(e))]})})()},getCategoryTree:function(){return a(function(){return o(this,function(e){return[2,i.get("/categories/tree")]})})()},bulkCreateCategories:function(e){return a(function(){return o(this,function(t){return[2,i.post("/categories/bulk",{categories:e})]})})()},bulkUpdateCategories:function(e){return a(function(){return o(this,function(t){return[2,i.put("/categories/bulk",{updates:e})]})})()}};let u=c}}]);